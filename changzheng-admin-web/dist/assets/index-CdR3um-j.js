const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-aAsznUlZ.js","assets/element-plus-DOarM9kH.js","assets/index-CqmoLc5R.css"])))=>i.map(i=>d[i]);
import{_ as S}from"./index-aAsznUlZ.js";import{_ as U}from"./_plugin-vue_export-helper-DRcqrMy4.js";/* empty css               *//* empty css                */import{i as h}from"./echarts-Bb6yjXMn.js";import{a as k,r as w,N as A,O as C,j as p,C as O,F as t,G as e,ac as T,ad as F,D as s,X as u,V as B,L as x,ae as D,l as L}from"./element-plus-DOarM9kH.js";const N={class:"dashboard"},V={class:"stat-content"},I={class:"stat-info"},M={class:"stat-value"},j={class:"stat-content"},q={class:"stat-info"},P={class:"stat-value"},G={class:"stat-content"},X={class:"stat-info"},H={class:"stat-value"},J={class:"stat-content"},K={class:"stat-info"},Q={class:"stat-value"},W={__name:"index",setup(Y){const l=k({totalUsers:0,activeUsersToday:0,averageMileage:0,completionRate:0,nodeClickStats:[],dailyActiveStats:[]}),f=w(null),m=w(null);let i=null,d=null;A(async()=>{await g(),b(),window.addEventListener("resize",v)}),C(()=>{window.removeEventListener("resize",v),i==null||i.dispose(),d==null||d.dispose()});async function g(){try{const{default:r}=await S(async()=>{const{default:c}=await import("./index-aAsznUlZ.js").then(n=>n.c);return{default:c}},__vite__mapDeps([0,1,2])),a=await r.get("/admin/stats/dashboard");Object.assign(l,a.data)}catch(r){console.error("获取统计数据失败:",r)}}function b(){var r,a,c,n;i=h(f.value),i.setOption({tooltip:{trigger:"axis"},xAxis:{type:"category",data:((r=l.dailyActiveStats)==null?void 0:r.map(o=>o.date))||[]},yAxis:{type:"value"},series:[{name:"活跃用户",type:"line",smooth:!0,areaStyle:{opacity:.3},data:((a=l.dailyActiveStats)==null?void 0:a.map(o=>o.count))||[]}]}),d=h(m.value),d.setOption({tooltip:{trigger:"axis"},xAxis:{type:"category",data:((c=l.nodeClickStats)==null?void 0:c.map(o=>o.nodeName))||[],axisLabel:{rotate:45}},yAxis:{type:"value"},series:[{name:"访问次数",type:"bar",data:((n=l.nodeClickStats)==null?void 0:n.map(o=>o.viewCount))||[],itemStyle:{color:"#409EFF"}}]})}function v(){i==null||i.resize(),d==null||d.resize()}return(r,a)=>{const c=p("User"),n=B,o=F,_=T,E=p("UserFilled"),z=p("Odometer"),R=p("TrophyBase"),y=D;return L(),O("div",N,[t(y,{gutter:20,class:"stats-row"},{default:e(()=>[t(_,{span:6},{default:e(()=>[t(o,{shadow:"hover",class:"stat-card"},{default:e(()=>[s("div",V,[s("div",I,[a[0]||(a[0]=s("p",{class:"stat-label"},"总用户数",-1)),s("p",M,u(l.totalUsers||0),1)]),t(n,{class:"stat-icon",size:48},{default:e(()=>[t(c)]),_:1})])]),_:1})]),_:1}),t(_,{span:6},{default:e(()=>[t(o,{shadow:"hover",class:"stat-card"},{default:e(()=>[s("div",j,[s("div",q,[a[1]||(a[1]=s("p",{class:"stat-label"},"今日活跃",-1)),s("p",P,u(l.activeUsersToday||0),1)]),t(n,{class:"stat-icon today",size:48},{default:e(()=>[t(E)]),_:1})])]),_:1})]),_:1}),t(_,{span:6},{default:e(()=>[t(o,{shadow:"hover",class:"stat-card"},{default:e(()=>[s("div",G,[s("div",X,[a[3]||(a[3]=s("p",{class:"stat-label"},"平均里程",-1)),s("p",H,[x(u(l.averageMileage||0)+" ",1),a[2]||(a[2]=s("small",null,"km",-1))])]),t(n,{class:"stat-icon mileage",size:48},{default:e(()=>[t(z)]),_:1})])]),_:1})]),_:1}),t(_,{span:6},{default:e(()=>[t(o,{shadow:"hover",class:"stat-card"},{default:e(()=>[s("div",J,[s("div",K,[a[5]||(a[5]=s("p",{class:"stat-label"},"完成率",-1)),s("p",Q,[x(u((l.completionRate*100||0).toFixed(1))+" ",1),a[4]||(a[4]=s("small",null,"%",-1))])]),t(n,{class:"stat-icon completion",size:48},{default:e(()=>[t(R)]),_:1})])]),_:1})]),_:1})]),_:1}),t(y,{gutter:20,class:"chart-row"},{default:e(()=>[t(_,{span:12},{default:e(()=>[t(o,{shadow:"hover"},{header:e(()=>[...a[6]||(a[6]=[s("span",null,"每日活跃用户趋势",-1)])]),default:e(()=>[s("div",{ref_key:"activeChartRef",ref:f,class:"chart-container"},null,512)]),_:1})]),_:1}),t(_,{span:12},{default:e(()=>[t(o,{shadow:"hover"},{header:e(()=>[...a[7]||(a[7]=[s("span",null,"节点访问Top10",-1)])]),default:e(()=>[s("div",{ref_key:"nodeChartRef",ref:m,class:"chart-container"},null,512)]),_:1})]),_:1})]),_:1})])}}},ot=U(W,[["__scopeId","data-v-601f14d8"]]);export{ot as default};
