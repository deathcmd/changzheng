import{_ as y}from"./_plugin-vue_export-helper-DRcqrMy4.js";/* empty css                 *//* empty css                  */import{r as p,a as x,C as V,D as a,F as s,G as r,H as h,I as E,J as b,K as k,L as B,M as I,E as R,l as q}from"./element-plus-DOarM9kH.js";import{u as z,a as C,b as F}from"./index-aAsznUlZ.js";const K={class:"login-container"},L={class:"login-card"},N={__name:"index",setup(U){const c=z(),f=C(),_=F(),i=p(null),t=p(!1),o=x({username:"",password:""}),g={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少6位",trigger:"blur"}]};async function d(){var l;try{await((l=i.value)==null?void 0:l.validate()),t.value=!0,await _.loginAction(o.username,o.password),R.success("登录成功");const e=f.query.redirect||"/";c.push(e)}catch(e){console.error("登录失败:",e)}finally{t.value=!1}}return(l,e)=>{const m=E,n=h,w=k,v=I;return q(),V("div",K,[a("div",L,[e[3]||(e[3]=a("div",{class:"login-header"},[a("h1",null,"云上重走长征路"),a("p",null,"管理后台")],-1)),s(v,{ref_key:"formRef",ref:i,model:o,rules:g,class:"login-form"},{default:r(()=>[s(n,{prop:"username"},{default:r(()=>[s(m,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=u=>o.username=u),placeholder:"请输入用户名",size:"large","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(n,{prop:"password"},{default:r(()=>[s(m,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=u=>o.password=u),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":"",onKeyup:b(d,["enter"])},null,8,["modelValue"])]),_:1}),s(n,null,{default:r(()=>[s(w,{type:"primary",size:"large",loading:t.value,class:"login-btn",onClick:d},{default:r(()=>[...e[2]||(e[2]=[B(" 登 录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])}}},H=y(N,[["__scopeId","data-v-1756316c"]]);export{H as default};
